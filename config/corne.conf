# Uncomment the following lines to enable the Corne RGB Underglow
CONFIG_ZMK_RGB_UNDERGLOW=y
CONFIG_WS2812_STRIP=y
CONFIG_ZMK_RGB_UNDERGLOW_EFF_START=3
CONFIG_ZMK_RGB_UNDERGLOW_BRT_START=40
CONFIG_ZMK_RGB_UNDERGLOW_ON_START=y
CONFIG_ZMK_RGB_UNDERGLOW_EXT_POWER=n

# OLED Bongo cat widget
# CONFIG_ZMK_WIDGET_BONGO_CAT=y

# Uncomment the following line to enable the Corne OLED Display
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_MOUSE=y

# Make Bluetooth stronger
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# Disable external power when not connected to USB
# CONFIG_ZMK_EXT_POWER_USB_ONLY=y

## RGB Backlight
## ZMK doesn't support per-key backlighting. The only lighting code that works with RGB LEDs is the underglow code, hence the suggestion to add your backlight LEDs to be part of underglow
# CONFIG_ZMK_BACKLIGHT=y
# CONFIG_LED_GPIO=y
# CONFIG_ZMK_BACKLIGHT_BRT_STEP=20
# CONFIG_ZMK_BACKLIGHT_BRT_START=40
# CONFIG_ZMK_BACKLIGHT_ON_START=y
# CONFIG_ZMK_BACKLIGHT_AUTO_OFF_IDLE=n
# CONFIG_ZMK_BACKLIGHT_AUTO_OFF_USB=n

## OLED Display
CONFIG_ZMK_DISPLAY=y
CONFIG_LVGL=y
CONFIG_ZMK_EXT_POWER=y
CONFIG_ZMK_WIDGET_OUTPUT_STATUS=y
CONFIG_ZMK_WIDGET_LAYER_STATUS=y
CONFIG_ZMK_WIDGET_WPM_STATUS=y
CONFIG_ZMK_WIDGET_BATTERY_STATUS=y
CONFIG_ZMK_WIDGET_BATTERY_STATUS_SHOW_PERCENTAGE=y

###############################################
# ZMK BLE Stability Fix for macOS + Windows
# - 프로필마다 다른 BLE 주소 사용
# - bond 충돌 방지
# - 페어링 실패 시 자동 복구
###############################################

# BLE 활성화 (명시적으로 선언)
CONFIG_ZMK_BLE=y
CONFIG_ZMK_BLE_PERIPHERAL=y
CONFIG_ZMK_BLE_BONDING=y

# 프로필별 고유 BLE 주소 사용
CONFIG_BT_ID_MAX=3
CONFIG_BT_DEVICE_NAME="Corne"
CONFIG_BT_DEVICE_NAME_DYNAMIC=y
CONFIG_BT_RANDOM_STATIC_ADDRESS=y

# 페어링 실패 시 자동 bond 정리
CONFIG_ZMK_BLE_CLEAR_BONDS_ON_FAILED_PAIR=y

# (선택) 첫 빌드에서만 사용: 모든 bond 초기화
# CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=y
###############################################
